<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>시화호 환경 모니터링 지도</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow: hidden;
            height: 100vh;
        }

        .container {
            width: 100vw;
            height: 100vh;
            position: relative;
            display: flex;
        }

        .sidebar {
            width: 380px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 255, 255, 0.3);
            padding: 20px;
            overflow-y: auto;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            height: 100vh;
            flex-shrink: 0;
        }

        .map-container {
            flex: 1;
            position: relative;
            background: #e8f4fd;
            overflow: hidden;
        }

        .map {
            width: 100%;
            height: 100%;
            position: relative;
            background: linear-gradient(45deg, #89CFF0 0%, #B8E6B8 50%, #87CEEB 100%);
        }

        .lake {
            position: absolute;
            top: 35%;
            left: 40%;
            width: 200px;
            height: 120px;
            background: radial-gradient(ellipse at center, #4A90E2 0%, #2E5BBA 100%);
            border-radius: 60% 40% 50% 70%;
            box-shadow: inset 0 0 30px rgba(0, 0, 0, 0.2);
            transform: rotate(-15deg);
        }

        .city-area {
            position: absolute;
            background: rgba(100, 100, 100, 0.3);
            border: 2px solid rgba(80, 80, 80, 0.5);
            border-radius: 10px;
        }

        .ansan {
            top: 20%;
            left: 25%;
            width: 120px;
            height: 100px;
            background: rgba(255, 140, 0, 0.2);
            border-color: rgba(255, 140, 0, 0.6);
        }

        .siheung {
            top: 45%;
            left: 20%;
            width: 140px;
            height: 90px;
            background: rgba(0, 150, 255, 0.2);
            border-color: rgba(0, 150, 255, 0.6);
        }

        .hwaseong {
            top: 55%;
            left: 45%;
            width: 180px;
            height: 120px;
            background: rgba(50, 200, 100, 0.2);
            border-color: rgba(50, 200, 100, 0.6);
        }

        .city-label {
            position: absolute;
            font-weight: bold;
            color: #2c3e50;
            font-size: 0.9em;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8);
            z-index: 5;
        }

        .seoul-bay {
            position: absolute;
            top: 10%;
            left: 60%;
            width: 200px;
            height: 150px;
            background: linear-gradient(135deg, #4A90E2 0%, #87CEEB 100%);
            border-radius: 40% 60% 50% 80%;
            opacity: 0.7;
            transform: rotate(20deg);
        }

        .layer-controls {
            margin-bottom: 25px;
        }

        .layer-controls h2 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.4em;
            border-bottom: 2px solid #3498db;
            padding-bottom: 5px;
        }

        .layer-item {
            margin-bottom: 15px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 8px;
            border-left: 4px solid #3498db;
            transition: all 0.3s ease;
        }

        .layer-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .layer-item.active {
            border-left-color: #e74c3c;
            background: rgba(231, 76, 60, 0.1);
        }

        .layer-toggle {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .toggle-switch {
            width: 40px;
            height: 20px;
            background: #ddd;
            border-radius: 20px;
            position: relative;
            margin-right: 10px;
            transition: background 0.3s ease;
        }

        .toggle-switch.active {
            background: #4CAF50;
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: white;
            top: 2px;
            left: 2px;
            transition: transform 0.3s ease;
        }

        .toggle-switch.active::after {
            transform: translateX(20px);
        }

        .layer-title {
            font-weight: 600;
            color: #2c3e50;
        }

        .layer-desc {
            font-size: 0.85em;
            color: #7f8c8d;
            margin-top: 5px;
        }

        .data-point {
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.3s ease;
            z-index: 10;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            border: 3px solid white;
        }

        .data-point:hover {
            transform: scale(1.3);
            z-index: 20;
        }

        .water-quality {
            animation: pulse 2s infinite;
        }

        .good { background: #27ae60; }
        .warning { background: #f39c12; }
        .danger { background: #e74c3c; }

        .waste-point {
            background: #8e44ad;
            border-radius: 30% 70% 70% 30%;
        }

        .green-point {
            background: #2ecc71;
            border-radius: 20% 80% 60% 40%;
        }

        .activity-point {
            background: #3498db;
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            border-radius: 0;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }

        .popup {
            position: absolute;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            min-width: 200px;
            z-index: 100;
            display: none;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .popup h3 {
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .popup p {
            color: #7f8c8d;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .time-slider {
            margin-top: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
        }

        .slider {
            width: 100%;
            height: 5px;
            background: #ddd;
            border-radius: 5px;
            outline: none;
        }

        .legend {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }

        .legend h4 {
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
            font-size: 0.85em;
        }

        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .stats-panel {
            margin-top: 25px;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            color: white;
        }

        .stats-panel h3 {
            margin-bottom: 10px;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.9em;
        }

        .briefing-panel {
            margin-top: 25px;
            padding: 15px;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            border-radius: 10px;
            color: white;
            max-height: 400px;
            overflow-y: auto;
        }

        .briefing-panel h3 {
            margin-bottom: 15px;
            color: #ecf0f1;
            border-bottom: 2px solid #3498db;
            padding-bottom: 8px;
        }

        .issue-item {
            margin-bottom: 15px;
            padding: 12px;
            background: rgba(52, 73, 93, 0.3);
            border-radius: 8px;
            border-left: 4px solid #e74c3c;
        }

        .issue-item.warning {
            border-left-color: #f39c12;
        }

        .issue-item.info {
            border-left-color: #3498db;
        }

        .issue-item.success {
            border-left-color: #27ae60;
        }

        .issue-title {
            font-weight: 600;
            font-size: 0.95em;
            margin-bottom: 5px;
            color: #ecf0f1;
        }

        .issue-desc {
            font-size: 0.85em;
            color: #bdc3c7;
            line-height: 1.4;
        }

        .issue-status {
            font-size: 0.8em;
            margin-top: 5px;
            padding: 3px 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            display: inline-block;
        }

        .tab-buttons {
            display: flex;
            margin-bottom: 15px;
            background: rgba(52, 73, 93, 0.2);
            border-radius: 8px;
            padding: 3px;
        }

        .tab-button {
            flex: 1;
            padding: 8px 12px;
            background: transparent;
            border: none;
            color: #bdc3c7;
            cursor: pointer;
            border-radius: 6px;
            font-size: 0.85em;
            transition: all 0.3s ease;
        }

        .tab-button.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .floating-info {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.95);
            padding: 15px 30px;
            border-radius: 25px;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            font-weight: 600;
            color: #2c3e50;
        }

        .year-highlight {
            background: rgba(241, 196, 15, 0.2);
            border: 2px solid #f1c40f;
            border-radius: 5px;
            padding: 2px 5px;
            margin-top: 5px;
            font-size: 0.8em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <div class="layer-controls">
                <h2>🗺️ 시화호 환경 지도</h2>
                
                <div class="layer-item active" data-layer="water">
                    <div class="layer-toggle">
                        <div class="toggle-switch active"></div>
                        <div>
                            <div class="layer-title">💧 수질/조류 모니터링</div>
                            <div class="layer-desc">pH, 탁도, 조류 발생량 실시간 데이터</div>
                        </div>
                    </div>
                </div>

                <div class="layer-item" data-layer="waste">
                    <div class="layer-toggle">
                        <div class="toggle-switch"></div>
                        <div>
                            <div class="layer-title">🗑️ 쓰레기/폐기물 핫스팟</div>
                            <div class="layer-desc">플라스틱, 생활쓰레기, 산업폐기물</div>
                        </div>
                    </div>
                </div>

                <div class="layer-item" data-layer="green">
                    <div class="layer-toggle">
                        <div class="toggle-switch"></div>
                        <div>
                            <div class="layer-title">🌱 녹지/습지 현황</div>
                            <div class="layer-desc">위성사진 기반 생태 데이터</div>
                        </div>
                    </div>
                </div>

                <div class="layer-item" data-layer="activity">
                    <div class="layer-toggle">
                        <div class="toggle-switch"></div>
                        <div>
                            <div class="layer-title">🏃‍♀️ 참여/캠페인</div>
                            <div class="layer-desc">청소활동, 플로깅, 참여기록</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="time-slider">
                <h4>⏱️ 시간축 조절</h4>
                <input type="range" class="slider" min="2004" max="2022" value="2015" id="timeSlider">
                <div style="display: flex; justify-content: space-between; font-size: 0.8em; margin-top: 5px;">
                    <span>2004</span>
                    <span id="currentYear">2015</span>
                    <span>2022</span>
                </div>
                <div class="year-highlight" id="yearDescription">해수 유통으로 점진적 수질 개선 중</div>
            </div>

            <div class="briefing-panel">
                <h3>📋 시화호 환경 브리핑</h3>
                
                <div class="tab-buttons">
                    <button class="tab-button active" data-tab="issues">주요 이슈</button>
                    <button class="tab-button" data-tab="history">변천사</button>
                    <button class="tab-button" data-tab="solutions">해결방안</button>
                </div>

                <div class="tab-content active" id="issues">
                    <div class="issue-item">
                        <div class="issue-title">🚨 초기 수질 오염 심각</div>
                        <div class="issue-desc">1990년대 '죽음의 호수' 상태에서 2000년 해수 유통 개시 후 점진적 개선 진행 중.</div>
                        <div class="issue-status">개선 진행중</div>
                    </div>

                    <div class="issue-item warning">
                        <div class="issue-title">⚠️ 산업폐수 관리</div>
                        <div class="issue-desc">반월·시화 공단 폐수처리시설 고도화 작업. 유입 차단과 처리 효율 향상 추진.</div>
                        <div class="issue-status">관리 강화중</div>
                    </div>

                    <div class="issue-item success">
                        <div class="issue-title">✅ 조력발전소 건설</div>
                        <div class="issue-desc">2011년 시화호 조력발전소 가동 시작. 청정에너지 생산과 수질 개선 동시 효과.</div>
                        <div class="issue-status">성공적 운영</div>
                    </div>

                    <div class="issue-item info">
                        <div class="issue-title">💡 생태복원 사업</div>
                        <div class="issue-desc">갈대습지 조성, 철새 도래지 복원. 생물서식지 확대와 자연정화 능력 증진.</div>
                        <div class="issue-status">지속 추진중</div>
                    </div>
                </div>

                <div class="tab-content" id="history">
                    <div class="issue-item info">
                        <div class="issue-title">🏗️ 1994년 시화호 완공</div>
                        <div class="issue-desc">간척사업 완료. 담수호로 설계되어 농업·공업용수 공급 목적으로 시작.</div>
                        <div class="year-highlight">1987-1994년</div>
                    </div>

                    <div class="issue-item">
                        <div class="issue-title">💀 1990년대 극심한 오염</div>
                        <div class="issue-desc">산업폐수와 생활하수 유입으로 '죽음의 호수' 상태. 심각한 수질 악화와 악취 발생.</div>
                        <div class="year-highlight">1994-2000년</div>
                    </div>

                    <div class="issue-item warning">
                        <div class="issue-title">🔄 2000년 해수 유통 시작</div>
                        <div class="issue-desc">담수호 포기, 해수 유통으로 전환. 수질 개선을 위한 근본적 정책 변화.</div>
                        <div class="year-highlight">2000년</div>
                    </div>

                    <div class="issue-item success">
                        <div class="issue-title">🌊 2011년 조력발전소</div>
                        <div class="issue-desc">세계 최대 규모 조력발전소 완공 및 가동. 재생에너지 생산기지로 전환.</div>
                        <div class="year-highlight">2011년</div>
                    </div>

                    <div class="issue-item success">
                        <div class="issue-title">🌱 2010년대 생태복원</div>
                        <div class="issue-desc">습지공원 조성, 갈대밭 복원, 철새 서식지 조성. 점진적 생태계 회복 성과.</div>
                        <div class="year-highlight">2010-2022년</div>
                    </div>
                </div>

                <div class="tab-content" id="solutions">
                    <div class="issue-item success">
                        <div class="issue-title">🏭 오염원 차단</div>
                        <div class="issue-desc">반월·시화공단 폐수처리시설 3단계 고도처리. 방류수 수질기준 강화.</div>
                    </div>

                    <div class="issue-item info">
                        <div class="issue-title">🌿 자연정화 시설</div>
                        <div class="issue-desc">인공습지 확대, 갈대밭 조성으로 자연 정화능력 향상. 연간 정화량 지속 증가.</div>
                    </div>

                    <div class="issue-item warning">
                        <div class="issue-title">🔋 조력발전 활용</div>
                        <div class="issue-desc">조력발전소 운영을 통한 해수 순환 촉진. 정체수역 해소와 수질 개선 효과.</div>
                    </div>

                    <div class="issue-item">
                        <div class="issue-title">📊 지속적 모니터링</div>
                        <div class="issue-desc">수질 자동측정망 구축, 정기적 생태조사 실시. 과학적 데이터 기반 관리 체계.</div>
                    </div>
                </div>
            </div>

            <div class="stats-panel">
                <h3>📊 시기별 현황</h3>
                <div class="stat-item">
                    <span>수질 등급</span>
                    <span id="waterGrade">4등급(나쁨)</span>
                </div>
                <div class="stat-item">
                    <span>COD 농도</span>
                    <span id="codLevel">15.2 mg/L</span>
                </div>
                <div class="stat-item">
                    <span>조력발전량</span>
                    <span id="tidalPower">미가동</span>
                </div>
                <div class="stat-item">
                    <span>생태복원율</span>
                    <span id="restoration">15%</span>
                </div>
            </div>
        </div>

        <div class="map-container">
            <div class="floating-info">
                🌊 시화호 환경변화 모니터링 시스템 (2004-2022)
            </div>

            <div class="map">
                <!-- 경기만/서해 표현 -->
                <div class="seoul-bay"></div>
                
                <!-- 도시 구역들 -->
                <div class="city-area ansan"></div>
                <div class="city-area siheung"></div>
                <div class="city-area hwaseong"></div>
                
                <!-- 시화호 -->
                <div class="lake"></div>
                
                <!-- 도시 라벨들 -->
                <div class="city-label" style="top: 15%; left: 27%;">안산시</div>
                <div class="city-label" style="top: 42%; left: 22%;">시흥시</div>
                <div class="city-label" style="top: 52%; left: 47%;">화성시</div>
                <div class="city-label" style="top: 38%; left: 44%;">시화호</div>
                <div class="city-label" style="top: 8%; left: 62%;">경기만</div>
                
                <!-- 수질 데이터 포인트 -->
                <div class="data-point water-quality danger" style="top: 38%; left: 42%;" data-info="지점 A|COD: 18.5 mg/L|총질소: 2.8 mg/L|수질등급: 4등급"></div>
                <div class="data-point water-quality danger" style="top: 42%; left: 48%;" data-info="지점 B|COD: 22.1 mg/L|총인: 0.15 mg/L|수질등급: 4등급"></div>
                <div class="data-point water-quality warning" style="top: 40%; left: 52%;" data-info="지점 C|COD: 12.8 mg/L|총질소: 2.1 mg/L|수질등급: 3등급"></div>
                <div class="data-point water-quality danger" style="top: 45%; left: 45%;" data-info="지점 D|COD: 19.7 mg/L|총인: 0.18 mg/L|수질등급: 4등급"></div>

                <!-- 쓰레기 핫스팟 -->
                <div class="data-point waste-point" style="top: 35%; left: 40%; display: none;" data-info="산업폐기물|반월공단 유입|처리시설 고도화 필요|2008년 개선"></div>
                <div class="data-point waste-point" style="top: 50%; left: 50%; display: none;" data-info="생활하수|시화공단 주변|하수처리장 증설|진행중"></div>
                <div class="data-point waste-point" style="top: 48%; left: 25%; display: none;" data-info="농업오염|축산 폐수|관리구역 지정|2010년 개선"></div>

                <!-- 녹지/습지 포인트 -->
                <div class="data-point green-point" style="top: 60%; left: 48%; display: none;" data-info="갈대습지|조성 면적: 1.2ha|2009년 시작|생태복원 중"></div>
                <div class="data-point green-point" style="top: 25%; left: 30%; display: none;" data-info="시화호 습지공원|2009년 개장|탐방객 연 50만명|교육장 운영"></div>
                <div class="data-point green-point" style="top: 65%; left: 55%; display: none;" data-info="철새도래지|가창오리 서식|겨울철 5만마리|보호구역 지정"></div>

                <!-- 참여/캠페인 포인트 -->
                <div class="data-point activity-point" style="top: 55%; left: 42%; display: none;" data-info="정화활동|시민단체 주관|월 2회 실시|참여자 평균 30명"></div>
                <div class="data-point activity-point" style="top: 32%; left: 45%; display: none;" data-info="환경감시|수질 모니터링|자원봉사 운영|데이터 수집"></div>
                <div class="data-point activity-point" style="top: 22%; left: 28%; display: none;" data-info="생태교육|학교 연계|연 200회 진행|학생 체험학습"></div>
            </div>

            <div class="legend">
                <h4>범례</h4>
                <div class="legend-item">
                    <div class="legend-color good"></div>
                    <span>수질 양호 (1-2등급)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color warning"></div>
                    <span>보통 (3등급)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color danger"></div>
                    <span>나쁨 (4-5등급)</span>
                </div>
            </div>

            <div class="popup" id="popup">
                <h3 id="popupTitle"></h3>
                <div id="popupContent"></div>
            </div>
        </div>
    </div>

    <script>
        // 연도별 데이터 정의
        const yearData = {
            2004: { grade: "4등급(나쁨)", cod: "20.5 mg/L", tidal: "미가동", restore: "5%", desc: "해수유통 시작 4년차, 여전히 심각한 오염 상태" },
            2005: { grade: "4등급(나쁨)", cod: "19.8 mg/L", tidal: "미가동", restore: "8%", desc: "점진적 개선 시작, 하수처리장 증설" },
            2006: { grade: "4등급(나쁨)", cod: "18.9 mg/L", tidal: "미가동", restore: "12%", desc: "폐수처리시설 고도화 착수" },
            2007: { grade: "3등급(보통)", cod: "16.